<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>mongo db</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>mongo db</h1><br/><p>ps aux | grep mongo</p><p></p><p><img src="images/40-1.png" alt="images/40-1.png" /></p><p></p><p>MongoDB is a source-available cross-platform document-oriented database program.</p><p>Classified as a NoSQL database program, MongoDB uses JSON-like documents with optional</p><p>schemas.</p><p></p><p>Let&#39;s interact with the MongoDB service by making use of the mongo command line utility and attempting to</p><p>extract the administrator password. A quick Google search using the keywords UniFi Default Database</p><p>shows that the default database name for the UniFi application is ace .</p><p></p><p>mongo --port 27117 ace --eval &quot;db.admin.find().forEach(printjson);&quot;</p><p></p><p><img src="images/40-2.png" alt="images/40-2.png" /></p><p></p><p></p><p></p><p></p><p>The output reveals a user called Administrator. Their password hash is located in the x_shadow variable but</p><p>in this instance it cannot be cracked with any password cracking utilities. Instead we can change the</p><p>x_shadow password hash with our very own created hash in order to replace the administrators password</p><p>and authenticate to the administrative panel. To do this we can use the mkpasswd command line utility.</p><p></p><p></p><p><strong>mkpasswd -m sha-512 Password1234</strong></p><p></p><p><strong>$6$sbnjIZBtmRds.L/E$fEKZhosqeHykiVWT1IBGju43WdVdDauv5RsvIPifi32CC2TTNU8kHOd2ToaW8fIX7XXM8P5Z8j4NB1gJGTONl1</strong></p><p></p><p>The $6$ is the identifier for the hashing algorithm that is being used, which is SHA-512 in this case, therefore we will have to make a hash of the same type.</p><p></p><p>SHA-512, or Secure Hash Algorithm 512, is a hashing algorithm used to convert text of</p><p>any length into a fixed-size string. Each output produces a SHA-512 length of 512 bits</p><p>(64 bytes). This algorithm is commonly used for email addresses hashing, password</p><p>hashing...</p><p></p><p>Once we&#39;ve generated the SHA-512 hash the output will look similar to the one above, however due to the</p><p>salt the hash will change every time it is generated.</p><p>A salt is added to the hashing process to force their uniqueness, increase their</p><p>complexity without increasing user requirements, and to mitigate password attacks like</p><p>hash tables.</p><p>Let&#39;s proceed to replacing the existing hash with the one we created.</p><p></p><p><strong>mongo --port 27117 ace --eval &#39;db.admin.update({&quot;_id&quot;:ObjectId(&quot;61ce278f46e0fb0012d47ee4&quot;)},{$set:{&quot;x_shadow&quot;:&quot;SHA_512 Hash Generated&quot;}})&#39;</strong></p><p></p><p><img src="images/40-3.png" alt="images/40-3.png" /></p><p></p><p></p><p>To verify:</p><p>mongo --port 27117 ace --eval &quot;db.admin.find().forEach(printjson);&quot;</p><p></p><p>Now we can login using our set password. (Password1234)</p><p></p><p><img src="images/40-4.png" alt="images/40-4.png" /></p><p></p><p>Inside we find ssh credentials for root.</p><p></p><p><img src="images/40-5.png" alt="images/40-5.png" /></p></div>
</body>
</html>
