<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>smbclient</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>smbclient</h1><br/><p><strong><h1>SMBClient</h1></strong></p><p></p><p>Because we&#39;re trying to access an SMB share, we need a client to access resources on servers. We will be using <strong>SMBClient</strong> because it&#39;s part of the default samba suite. While it is available by default on <strong>Kali</strong> and <strong>Parrot</strong>, </p><p></p><p><strong>To Install:</strong></p><p>apt install smbclient</p><p>Default Port: 445</p><p></p><p>We can remotely access the SMB share using the syntax:</p><p></p><p><strong>smbclient //[IP]/[SHARE]</strong></p><p></p><p>Followed by the tags:</p><p></p><p><strong>-U [name] : to specify the user</strong></p><p><strong></strong></p><p><strong>-p [port] : to specify the port</strong></p><p><strong></strong></p><p></p><p><strong><span style="text-decoration:underline;">Anonymous Login:</span></strong></p><p></p><p></p><p>Lets see if our interesting share has been configured to allow anonymous access, I.E it doesn&#39;t require authentication to view the files. We can do this easily by:</p><p></p><p>- using the username &quot;<strong>Anonymous</strong>&quot;</p><p></p><p>- connecting to the share we found during the enumeration stage</p><p></p><p>- and not supplying a password. </p><p></p><p></p><p><strong><span style="text-decoration:underline;">Example Usages of Smbclient:</span></strong></p><p></p><p></p><p>smbclient -L {Target_IP}</p><p></p><p>It is used to list the samba share. Leave the password field blank </p><p></p><p><img src="images/13-1.png" alt="images/13-1.png" /></p><p></p><p>or use -N switch for no password (Only for Listing)</p><p></p><p>smbclient -N -L  {Target_IP}</p><p></p><p><img src="images/13-2.png" alt="images/13-2.png" /></p><p></p><p></p><p>smbclient -L  {Target_IP} -U Administrator</p><p></p><p>For misconfigurtions of Admin account. Note if -U not specified by default the user is root.</p><p></p><p><img src="images/13-3.png" alt="images/13-3.png" /></p><p></p><p></p><p>smbclient  \\{Target_IP}\{Sharename} </p><p></p><p>Enter into a non secured samba share without password. (Leave Blank)</p><p></p><p><img src="images/13-4.png" alt="images/13-4.png" /></p><p></p><p>or use:</p><p>smbclient  -N  \\{Target_IP}\{Sharename} </p><p></p><p>Samba Commands:</p><p>help</p><p></p><p><img src="images/13-5.png" alt="images/13-5.png" /></p><p></p><p></p><p>smbclient  \\{Target_IP}\{Sharename} -U {Username}</p><p></p><p><img src="images/13-6.png" alt="images/13-6.png" /></p><p></p><p><strong><span style="text-decoration:underline;">To Recursively download a samba share:</span></strong></p><p></p><p>You can recursively download the SMB share too. Submit the username and password as nothing.</p><p></p><p>smbget -R smb://&lt;ip&gt;/share_name</p><p></p><p></p><p><strong><span style="text-decoration:underline;">One Liner smbclient command to upload a file into a share (It will prompt for Password):</span></strong></p><p></p><p>smbclient -c &#39;put cybex.exe&#39; -U t1_leonard.summers -W ZA &#39;//thmiis.za.tryhackme.com/admin$/&#39;</p><p></p><p><img src="images/13-7.png" alt="images/13-7.png" /></p><p></p><p>-c   	:	Command</p><p>-U  	:	Username</p><p>-W	:	Domain Name</p><p>//...	:	Full path of share</p><p></p><p>Then Enter the password when prompted.</p><p></p></div>
</body>
</html>
