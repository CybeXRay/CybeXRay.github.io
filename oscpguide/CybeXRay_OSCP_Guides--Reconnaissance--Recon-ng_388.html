<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Recon-ng</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Recon-ng</h1><br/><p><strong><h1>Recon-ng</h1></strong></p><p></p><p></p><p></p><p>Recon-ng is a framework that helps automate the OSINT work. It uses modules from various authors and provides a multitude of functionality. Some modules require keys to work; the key allows the module to query the related online API. In this task, we will demonstrate using Recon-ng in the terminal.</p><p></p><p>Link: <strong>https://github.com/lanmaster53/recon-ng</strong> </p><p></p><p>From a penetration testing and red team point of view, Recon-ng can be used to find various bits and pieces of information that can aid in an operation or OSINT task. All the data collected is automatically saved in the database related to your workspace. For instance, you might discover host addresses to later port-scan or collect contact email addresses for phishing attacks.</p><p></p><p>You can start Recon-ng by running the command <strong>recon-ng</strong>. Starting Recon-ng will give you a prompt like<strong> [recon-ng][default] &gt;</strong>. At this stage, you need to <strong>select</strong> the <strong>installed module</strong> you want to use. However, if this is the first time you&#39;re running recon-ng, you will need to <strong>install</strong> the <strong>module(s) </strong>you need.</p><p></p><p><img src="images/388-1.png" alt="images/388-1.png" /></p><p></p><p>In this task, we will follow the following workflow:</p><p></p><p>    1. Create a workspace for your project</p><p>    2. Insert the starting information into the database</p><p>    3. Search the marketplace for a module and learn about it before installing</p><p>    4. List the installed modules and load one</p><p>    5. Run the loaded module</p><p>    </p><p><strong><span style="text-decoration:underline;">Creating a Workspace</span></strong></p><p></p><p>Run workspaces <strong>create WORKSPACE_NAME</strong> to create a new workspace for your investigation. For example, workspaces <strong>create thmredteam</strong> will create a workspace named thmredteam.</p><p></p><p><strong>recon-ng -w WORKSPACE_NAME</strong> starts recon-ng with the specific workspace.</p><p></p><p>We can use the following to interact with different workspaces.</p><p></p><p><img src="images/388-2.png" alt="images/388-2.png" /></p><p></p><p><strong><h3>Seeding the Database</h3></strong><strong><span style="text-decoration:underline;"></span></strong></p><p><strong><span style="text-decoration:underline;"></span></strong></p><p>In reconnaissance, you are starting with one piece of information and transforming it into new pieces of information. For instance, you might start your research with a company name and use that to discover the domain name(s), contacts and profiles. Then you would use the new information you obtained to transform it further and learn more about your target.</p><p></p><p>Let’s consider the case where we know the target&#39;s domain name, thmredteam.com, and we would like to feed it into the Recon-ng database related to the active workspace. If we want to check the names of the tables in our database, we can run <strong>db schema</strong>.</p><p></p><p>We want to insert the domain name <strong>thmredteam.com</strong> into the domains table. We can do this using the command <strong>db insert domains</strong>.</p><p></p><p><img src="images/388-3.png" alt="images/388-3.png" /></p><p></p><p></p><p></p><p><img src="images/388-4.png" alt="images/388-4.png" /></p><p></p><p><strong>db query select * from domains</strong></p><p></p><p><img src="images/388-5.png" alt="images/388-5.png" /></p><p></p><p><strong><h3>Recon-ng Marketplace</h3></strong></p><p></p><p>We have a domain name, so a logical next step would be to search for a module that transforms domains into other types of information. Assuming we are starting from a fresh installation of Recon-ng, we will search for suitable modules from the marketplace.</p><p></p><p>Before you install modules using the marketplace, these are some useful commands related to marketplace usage:</p><p></p><p>    <strong>• marketplace search</strong> KEYWORD to search for available modules with keyword.</p><p>    <strong>• marketplace info</strong> MODULE to provide information about the module in question.</p><p>    <strong>• marketplace install</strong> MODULE to install the specified module into Recon-ng.</p><p>    <strong>• marketplace remove </strong>MODULE to uninstall the specified module.</p><p></p><p>The modules are grouped under multiple categories, such as discovery, import, recon and reporting. Moreover, recon is also divided into many subcategories depending on the transform type. Run <strong>marketplace search</strong> to get a list of all available modules.</p><p></p><p><img src="images/388-6.png" alt="images/388-6.png" /></p><p></p><p>In the terminal below, we search for modules containing <strong>domains-</strong>.</p><p></p><p><img src="images/388-7.png" alt="images/388-7.png" /></p><p></p><p></p><p>We notice many subcategories under recon, such as <strong>domains-companies,</strong> <strong>domains-contacts, and domains-hosts</strong>. This naming tells us what kind of new information we will get from that transformation. For instance, domains-hosts means that the module will find hosts related to the provided domain.</p><p></p><p>Some modules, like <strong>whoxy_whois</strong>, require a <strong>key</strong>, as we can tell from the <strong>*</strong> under the <strong>K</strong> <strong>column</strong>. This requirement indicates that this module is not usable unless we have a <strong>key</strong> to use the related service.</p><p></p><p>Other modules have dependencies, indicated by a <strong>*</strong> under the <strong>D column</strong>. <strong>Dependencies</strong> show that <strong>third-party</strong> <strong>Python</strong> <strong>libraries</strong> might be necessary to use the related module.</p><p></p><p>Let’s say that you are interested in <strong>recon/domains-hosts/google_site_web</strong>. To learn more about any particular module, you can use the command <strong>marketplace info MODULE</strong>; this is an essential command that explains what the module does. For example, <strong>marketplace info google_site_web</strong> provides the following description: “Harvests hosts from Google.com by using the ‘site’ search operator. Updates the ‘hosts’ table with the results.” In other words, this module will use the Google search engine and the “site” operator.</p><p></p><p>We can install the module we want with the command marketplace install MODULE, for example, <strong>marketplace install google_site_web</strong>.</p><p></p><p><img src="images/388-8.png" alt="images/388-8.png" /></p><p></p><p><strong>Installing</strong></p><p></p><p><img src="images/388-9.png" alt="images/388-9.png" /></p><p></p><p><strong><h3>Working with Installed Modules</h3></strong></p><p></p><p>We can work with modules using:</p><p></p><p>    <strong>modules search</strong> to get a list of all the installed modules</p><p>    <strong>modules load MODULE</strong> to load a specific module to memory</p><p></p><p>Let’s load the module that we installed earlier from the marketplace, <strong>modules load viewdns_reverse_whois</strong>. To run it, we need to set the required options.</p><p></p><p>    <strong>options list</strong> to list the options that we can set for the loaded module.</p><p>    <strong>options set &lt;option&gt; &lt;value&gt;</strong> to set the value of the option.</p><p></p><p>In a previous step, we have installed the module <strong>google_site_web</strong>, so let’s load it <strong>using load google_site_web</strong> and <strong>run it </strong>with <strong>run</strong>. We have already <strong>added</strong> the domain <strong>thmredteam.com</strong> to the database, so when the module is run, it will read that value from the database, get new kinds of information, and add them to the database in turn. The commands and the results are shown in the terminal output below.</p><p></p><p><img src="images/388-10.png" alt="images/388-10.png" /></p><p></p><p>This module has queried Google and discovered two hosts, <strong>cafe.thmredteam.com</strong> and <strong>clinic.thmredteam.com</strong>. It is possible that by the time you run these steps, new hosts will also appear.</p><p></p><p><strong><h3>Keys</h3></strong></p><p></p><p>Some modules cannot be used without a key for the respective service API. <strong>K</strong> indicates that you need to provide the relevant service key to use the module in question.</p><p></p><p>    <strong>• keys list</strong> lists the keys</p><p>    <strong>• keys add KEY_NAME KEY_VALUE</strong> adds a key</p><p>    <strong>• keys remove KEY_NAME</strong> removes a key</p><p></p><p>Once you have the set of modules installed, you can proceed to load and run them.</p><p></p><p>    <strong>• modules load MODULE</strong> loads an installed module</p><p>    <strong>• CTRL + C</strong> unloads the module.</p><p>    <strong>• info</strong> to review the loaded module’s info.</p><p>    <strong>• options list</strong> lists available options for the chosen module.</p><p>   <strong> • options set NAME VALUE</strong></p><p>    <strong>• run</strong> to execute the loaded module.</p><p>    </p><p>    </p><p></p></div>
</body>
</html>
