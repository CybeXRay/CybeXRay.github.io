<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>crackmapexec</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>crackmapexec</h1><br/><p><a href="https://github.com/byt3bl33d3r/CrackMapExec">https://github.com/byt3bl33d3r/CrackMapExec</a></p><p></p><p>CME or crackmapexec is a powerful tool to automate certain processes. See github page for more details.</p><p></p><p><img src="images/66-1.png" alt="images/66-1.png" /></p><p></p><p>As we can the see, the user: hazard &amp; password: stealth1agent combination was successful.</p><p></p><p>Now, we try to gain foothold using this tool. (As this machine was ruuning windows remote management: winrm 2.0)</p><p></p><p><img src="images/66-2.png" alt="images/66-2.png" /></p><p></p><p>The login failed, which means that the user “hazard” isn’t in the “Remote Management Users”</p><p>group. However, possession of valid credentials will still let us enumerate the box. Let’s try</p><p>enumerating the users on the box using RID bruteforce. RID stands for Relative Identifier, which is</p><p>a part of SID (Security Identifier) used to uniquely identify a user or service on a Windows host.</p><p></p><p><img src="images/66-3.png" alt="images/66-3.png" /></p><p></p><p>The Domain or Local Identifier is constant for a given computer, while the RID is unique. So we</p><p>can query the box for it’s “Local Computer Identifier”, and bruteforce RID values, which will return</p><p>usernames for valid SIDs. The --rid-brute option in CME can do this for us.</p><p></p><p><img src="images/66-4.png" alt="images/66-4.png" /></p><p></p><p>We can check the new users now.</p><p></p><p><img src="images/66-5.png" alt="images/66-5.png" /></p><p></p><p>Note: Once a credential is matched, the tool stops checking. So needed a new file for users as hazard was already matched in the users.txt</p><p></p><p></p><p>Now we test with winrm module. The “Pwn3d!” message tells that the user has remote manage access. </p><p><img src="images/66-6.png" alt="images/66-6.png" /></p><p></p><p>Finally, we will be using a special tool designed for windows remote mangement named “evil-winrm” for login.</p><p></p><p></p><p><strong><span style="text-decoration:underline;">SSH Bruteforce with users.txt and passwords.txt</span></strong></p><p></p><p><img src="images/66-7.png" alt="images/66-7.png" /></p><p></p><p>No combination was successful.</p><p></p><p></p><p></p><p><strong><span style="text-decoration:underline;">SMB User Test (To check if a credentail found is a valid windows credential)</span></strong></p><p></p><p></p><p><strong>crackmapexec smb 10.10.111.3 -u lilyle -p ChangeMe#1234</strong></p><p><img src="images/66-8.png" alt="images/66-8.png" /></p></div>
</body>
</html>
