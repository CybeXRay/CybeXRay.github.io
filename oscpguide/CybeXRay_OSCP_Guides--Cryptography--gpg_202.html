<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>gpg</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>gpg</h1><br/><p><strong><h2>GPG Commands</h2></strong></p><p></p><p>For more details: <strong>man gpg</strong></p><p>Whenever, we first run <strong>gpg</strong> we get the following messages.</p><p><img src="images/202-1.png" alt="images/202-1.png" /></p><p></p><p><strong>Note</strong>: <strong>/root/.gnupg</strong> directory holds all the configuration files which we can delete if we need to reset.</p><p></p><p></p><p><strong><span style="text-decoration:underline;">Decrypt an encrypted file with a paraphrase</span></strong></p><p></p><p><strong>Example</strong></p><p>Paraphrase : <strong>plant42_can_be_destroy_with_vjolt</strong></p><p>GPG File: <strong>/home/cybex/lab/thm/CTFs/biohazard/helmet_key.txt.gpg</strong></p><p></p><p>We can use the following commands to <strong>decrypt</strong>:</p><p></p><p><strong>gpg --decrypt helmet_key.txt.gpg</strong></p><p><strong>Note:</strong> This --decrypt option will try to read the extracted file. (Similar to <strong>cat helmet_key.txt</strong>)</p><p></p><p><img src="images/202-2.png" alt="images/202-2.png" /></p><p>Once we enter the Paraphrase.</p><p></p><p><img src="images/202-3.png" alt="images/202-3.png" /></p><p></p><p>We get the message on the terminal. The decrypted file&#39;s content is read . <strong>NO new file is created/extracted.</strong></p><p></p><p>or</p><p><strong>gpg helmet_key.txt.gpg</strong></p><p>Note: Giving no options will <strong>extract</strong> the file to the current directory.</p><p></p><p>Once this is run. The prompt will ask for paraphrase. Once we enter it. The file will be decrypted</p><p><img src="images/202-4.png" alt="images/202-4.png" /></p><p>Once we enter the Paraphrase.</p><p></p><p><img src="images/202-5.png" alt="images/202-5.png" /></p><p></p><p>The decrypted file is extracted to the current directory. See the highlighted.</p><p>We can then process the file further.</p><p></p><p></p><p></p><p><strong><span style="text-decoration:underline;">GPG Keys Basics</span></strong></p><p></p><p><strong>gpg --list-keys</strong></p><p><strong>gpg --list-secret-keys</strong></p><p></p><p>The above shows all the keys that are currently imported by us.</p><p>Note: During First run <strong>trustdb</strong> will be created</p><p></p><p><img src="images/202-6.png" alt="images/202-6.png" />1</p><p></p><p>Therefore to <strong>delete all keys</strong> and <strong>reset</strong> everything: <strong>rm -rf /root/.gnupg</strong></p><p></p><p><strong>To add keys from key_file</strong></p><p></p><p><strong>gpg --import key_file</strong></p><p><img src="images/202-7.png" alt="images/202-7.png" /></p><p></p><p><strong>Notice</strong> that once importing is done. We can use <strong>--list-keys</strong> and <strong>--list-secret-keys</strong> to show the details. (<strong>pub</strong> and <strong>sec</strong> keys)</p><p>Also we get the key_name : <strong>49829BBEB100BB2692F33CD2C9AE71AB3180BC08</strong></p><p>(Key_name same for both public and secret)</p><p></p><p><strong>To delete individual keys</strong></p><p></p><p><strong>gpg --delete-keys key_name</strong>											[Only <strong>pub</strong> key delete]</p><p><strong>gpg --delete-secret-keys key_name</strong>							[Only <strong>sec</strong> key delete]</p><p><strong>gpg --delete-secret-and-public-key key_name</strong>			[Both <strong>pub</strong> &amp; <strong>sec</strong> key delete]</p><p></p><p><img src="images/202-8.png" alt="images/202-8.png" /></p><p></p><p>The process will ask for confirmation twice in a new window.</p><p><img src="images/202-9.png" alt="images/202-9.png" /></p><p></p><p><img src="images/202-10.png" alt="images/202-10.png" /></p><p></p><p></p><p><strong><span style="text-decoration:underline;">Decrypt an ecrypted file with a key</span></strong></p><p></p><p><strong>Example</strong></p><p>KEY File: <strong>/home/cybex/lab/thm/CTFs/overpass-3/priv.key</strong></p><p>GPG File: <strong>/home/cybex/lab/thm/CTFs/overpass-3/CustomerDetails.xlsx.gpg</strong></p><p></p><p><strong>gpg --import priv.key</strong></p><p><strong>gpg CustomerDetails.xlsx.gpg</strong></p><p></p><p><img src="images/202-11.png" alt="images/202-11.png" /></p><p></p><p>We can see <strong>CustomerDetails.xlsx</strong> is <strong>extracted</strong> in the same folder. (As <strong>--decrypt</strong> option wasn&#39;t used)</p></div>
</body>
</html>
