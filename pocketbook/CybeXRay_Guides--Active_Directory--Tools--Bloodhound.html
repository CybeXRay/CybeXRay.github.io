<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Bloodhound</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Bloodhound</h1><br/><strong>BloodHound</strong><br /><br /><strong>https://github.com/BloodHoundAD/BloodHound</strong><br /><br /><strong>Bloodhound</strong> is a graphical interface that allows you to visually map  out the network. This tool along with <strong>SharpHound</strong> which similar to  PowerView takes the user, groups, trusts etc. of the network and  collects them into .json files to be used inside of Bloodhound.<br />Well be focusing on how to collect the .json files and how to import them into Bloodhound<br /><br /><strong>Note:</strong> It uses <strong>SharpHound</strong><br /><br /><strong>apt install bloodhound neo4j</strong><br /><strong>neo4j console</strong>			:		To Start the neo4j server<br /><br />default credentials -&gt; neo4j:neo4j<br /><br />Then to start Bloodhound in terminal run:<br /><strong>bloodhound</strong><br /><br />Then login using default credentials.<br /><br /><br /><br /><strong>Getting loot with SharpHound</strong><br /><br />1.) <strong>powershell -ep bypass</strong> same as with PowerView<br />2.) <strong>. .\Downloads\SharpHound.ps1</strong>    <br />3.) <strong>Invoke-Bloodhound -CollectionMethod All -Domain CONTROLLER.local -ZipFileName loot.zip </strong>   <br /><br /><a href=""><img src="images/163-1.png" alt="images/163-1.png" /></a><br /><br /><strong>Very Very Important Note:</strong><br />If we use the SharpHound.ps1 file provided in this room. The loot.zip will not work due to <strong>compatibility issue</strong>. For the same to work, we need to install an old version of Bloodhound. (Tedious Task)<br /><br />However, when I researched on the Bloodhound github, I found the latest <strong>SharpHound 1.0.3</strong> that is compatible with the latest Bloodhound.<br />But no ps1 format could be found. Thus I end up using the <strong>SharpHound.exe</strong> executible from:<br /><br /><strong>https://github.com/BloodHoundAD/SharpHound/releases</strong><br /><br /><br /><a href=""><img src="images/163-2.png" alt="images/163-2.png" /></a><br /><br />Unzip the highlighted release and transfer the <strong>SharpHound.exe</strong> file to the target windows machine using scp.<br /><br /><strong>Note:</strong> Running the <strong>executible</strong> is bit different than running the <strong>ps1</strong> file. Following is the syntax<br />Quit <strong>Powershell</strong> and run it in <strong>cmd</strong>.<br /><br /><strong>SharpHound.exe --CollectionMethods All --domain CONTROLLER.local --ZipFileName loot.zip</strong><br /><br /><br /><strong>Remarks:</strong> The command is almost similar to that of <strong>ps1</strong> version. However, it uses <strong>--</strong> for all options and <strong>CollectionMethod</strong> ---→ <strong>CollectionMethods</strong><br /><br /><a href=""><img src="images/163-3.png" alt="images/163-3.png" /></a><br /><br /><br /><br />4.) Transfer the loot.zip folder to your Attacker Machine<br /><br /><strong>Note:</strong> you can use scp to transfer the file if you’re using ssh<br /><br /><a href=""><img src="images/163-4.png" alt="images/163-4.png" /></a><br /><br /><br /><strong>Starting Neo4j console.</strong><br /><br /><a href=""><img src="images/163-5.png" alt="images/163-5.png" /></a><br /><br /><strong>Then Run Bloodhound.</strong><br /><br /><a href=""><img src="images/163-6.png" alt="images/163-6.png" /></a><br /><br />Note: Upon first run of bloodhound, it asks us to change the password by going to <strong>http://localhost:7474</strong><br /><br /><br />In the neo4j browser, we give the first console command (This command is entered by default)<br /><strong>:server connect</strong><br /><br /><a href=""><img src="images/163-7.png" alt="images/163-7.png" /></a><br /><br />We enter the default credentials here and are asked to change it.<br /><br /><a href=""><img src="images/163-8.png" alt="images/163-8.png" /></a><br /><br />Once Password is set. We can play around in Neo4j web browser.<br /><br /><strong>To view help, use the command</strong><br /><br />:help server<br /><br /><a href=""><img src="images/163-9.png" alt="images/163-9.png" /></a><br /><br /><strong>To change Password</strong><br /><br />:server change-password<br /><br /><strong>Now, get back to Bloodhound and use the new set credentials</strong><br /><br /><strong>Mapping the network with BloodHound</strong><br /><br />1.) bloodhound Run this on your attacker machine not the victim machine<br />2.) Sign In using the same credentials you set with Neo4j<br />3.) Inside of Bloodhound search for <strong>import icon</strong> <a href=""><img src="images/163-10.png" alt="images/163-10.png" /></a> and import the loot.zip folder<br /><br /><strong>Note:</strong> On some versions of BloodHound the import button does not work to get around this simply <strong>drag and drop the loot.zip</strong> folder into Bloodhound to import the .json files<br />Or Click on the <strong>upload icon</strong> <a href=""><img src="images/163-11.png" alt="images/163-11.png" /></a> on right and upload the loot.zip<br /><br />4.) To view the graphed network open the <strong>Menu</strong> and select <strong>Analysis</strong> this will give you a list of pre-compiled queries to choose from.<br /><br /><br /><strong>Eg,</strong> The queries can be as simple as <strong>find all domain admins</strong><br /><br /><a href=""><img src="images/163-12.png" alt="images/163-12.png" /></a><br /><br /><br /><strong>Eg,</strong> The queries can be as complex as <strong>shortest path to high value targets</strong><br /><br /><a href=""><img src="images/163-13.png" alt="images/163-13.png" /></a></div>
</body>
</html>
