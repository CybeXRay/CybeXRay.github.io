<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>smbclient</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>smbclient</h1><br/><strong><h1>SMBClient</h1></strong><br /><br />Because we&#39;re trying to access an SMB share, we need a client to access resources on servers. We will be using <strong>SMBClient</strong> because it&#39;s part of the default samba suite. While it is available by default on <strong>Kali</strong> and <strong>Parrot</strong>, <br /><br /><strong>To Install:</strong><br />apt install smbclient<br />Default Port: 445<br /><br />We can remotely access the SMB share using the syntax:<br /><br /><strong>smbclient //[IP]/[SHARE]</strong><br /><br />Followed by the tags:<br /><br /><strong>-U [name] : to specify the user<br /><br />-p [port] : to specify the port<br /></strong><br /><br /><strong><span style="text-decoration:underline;">Anonymous Login:</span></strong><br /><br /><br />Lets see if our interesting share has been configured to allow anonymous access, I.E it doesn&#39;t require authentication to view the files. We can do this easily by:<br /><br />- using the username &quot;<strong>Anonymous</strong>&quot;<br /><br />- connecting to the share we found during the enumeration stage<br /><br />- and not supplying a password. <br /><br /><br /><strong><span style="text-decoration:underline;">Example Usages of Smbclient:</span></strong><br /><br /><br />smbclient -L {Target_IP}<br /><br />It is used to list the samba share. Leave the password field blank <br /><br /><img src="images/13-1.png" alt="images/13-1.png" /><br /><br />or use -N switch for no password (Only for Listing)<br /><br />smbclient -N -L  {Target_IP}<br /><br /><img src="images/13-2.png" alt="images/13-2.png" /><br /><br /><br />smbclient -L  {Target_IP} -U Administrator<br /><br />For misconfigurtions of Admin account. Note if -U not specified by default the user is root.<br /><br /><img src="images/13-3.png" alt="images/13-3.png" /><br /><br /><br />smbclient  \\{Target_IP}\{Sharename} <br /><br />Enter into a non secured samba share without password. (Leave Blank)<br /><br /><img src="images/13-4.png" alt="images/13-4.png" /><br /><br />or use:<br />smbclient  -N  \\{Target_IP}\{Sharename} <br /><br />Samba Commands:<br />help<br /><br /><img src="images/13-5.png" alt="images/13-5.png" /><br /><br /><br />smbclient  \\{Target_IP}\{Sharename} -U {Username}<br /><br /><img src="images/13-6.png" alt="images/13-6.png" /><br /><br /><strong>To Recursively download a samba share:</strong><br /><br />You can recursively download the SMB share too. Submit the username and password as nothing.<br /><br />smbget -R smb://&lt;ip&gt;/share_name</div>
</body>
</html>
