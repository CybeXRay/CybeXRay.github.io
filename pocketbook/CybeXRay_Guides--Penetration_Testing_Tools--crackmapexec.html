<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>crackmapexec</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>crackmapexec</h1><br/><a href="https://github.com/byt3bl33d3r/CrackMapExec">https://github.com/byt3bl33d3r/CrackMapExec</a><br /><br />CME or crackmapexec is a powerful tool to automate certain processes. See github page for more details.<br /><br /><img src="images/66-1.png" alt="images/66-1.png" /><br /><br />As we can the see, the user: hazard &amp; password: stealth1agent combination was successful.<br /><br />Now, we try to gain foothold using this tool. (As this machine was ruuning windows remote management: winrm 2.0)<br /><br /><img src="images/66-2.png" alt="images/66-2.png" /><br /><br />The login failed, which means that the user “hazard” isn’t in the “Remote Management Users”<br />group. However, possession of valid credentials will still let us enumerate the box. Let’s try<br />enumerating the users on the box using RID bruteforce. RID stands for Relative Identifier, which is<br />a part of SID (Security Identifier) used to uniquely identify a user or service on a Windows host.<br /><br /><img src="images/66-3.png" alt="images/66-3.png" /><br /><br />The Domain or Local Identifier is constant for a given computer, while the RID is unique. So we<br />can query the box for it’s “Local Computer Identifier”, and bruteforce RID values, which will return<br />usernames for valid SIDs. The --rid-brute option in CME can do this for us.<br /><br /><img src="images/66-4.png" alt="images/66-4.png" /><br /><br />We can check the new users now.<br /><br /><img src="images/66-5.png" alt="images/66-5.png" /><br /><br />Note: Once a credential is matched, the tool stops checking. So needed a new file for users as hazard was already matched in the users.txt<br /><br /><br />Now we test with winrm module. The “Pwn3d!” message tells that the user has remote manage access. <br /><img src="images/66-6.png" alt="images/66-6.png" /><br /><br />Finally, we will be using a special tool designed for windows remote mangement named “evil-winrm” for login.<br /><br /><br /><strong><span style="text-decoration:underline;">SSH Bruteforce with users.txt and passwords.txt</span></strong><br /><br /><img src="images/66-7.png" alt="images/66-7.png" /><br /><br />No combination was successful.<br /><br /><br /><br /><strong><span style="text-decoration:underline;">SMB User Test (To check if a credentail found is a valid windows credential)</span></strong><br /><br /><br /><strong>crackmapexec smb 10.10.111.3 -u lilyle -p ChangeMe#1234</strong><br /><img src="images/66-8.png" alt="images/66-8.png" /></div>
</body>
</html>
