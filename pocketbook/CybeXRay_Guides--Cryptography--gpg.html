<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>gpg</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>gpg</h1><br/><strong><h2>GPG Commands</h2></strong><br /><br />For more details: <strong>man gpg</strong><br />Whenever, we first run <strong>gpg</strong> we get the following messages.<br /><img src="images/202-1.png" alt="images/202-1.png" /><br /><br /><strong>Note</strong>: <strong>/root/.gnupg</strong> directory holds all the configuration files which we can delete if we need to reset.<br /><br /><br /><strong><span style="text-decoration:underline;">Decrypt an encrypted file with a paraphrase</span></strong><br /><br /><strong>Example</strong><br />Paraphrase : <strong>plant42_can_be_destroy_with_vjolt</strong><br />GPG File: <strong>/home/cybex/lab/thm/CTFs/biohazard/helmet_key.txt.gpg</strong><br /><br />We can use the following commands to <strong>decrypt</strong>:<br /><br /><strong>gpg --decrypt helmet_key.txt.gpg</strong><br /><strong>Note:</strong> This --decrypt option will try to read the extracted file. (Similar to <strong>cat helmet_key.txt</strong>)<br /><br /><img src="images/202-2.png" alt="images/202-2.png" /><br />Once we enter the Paraphrase.<br /><br /><img src="images/202-3.png" alt="images/202-3.png" /><br /><br />We get the message on the terminal. The decrypted file&#39;s content is read . <strong>NO new file is created/extracted.</strong><br /><br />or<br /><strong>gpg helmet_key.txt.gpg</strong><br />Note: Giving no options will <strong>extract</strong> the file to the current directory.<br /><br />Once this is run. The prompt will ask for paraphrase. Once we enter it. The file will be decrypted<br /><img src="images/202-4.png" alt="images/202-4.png" /><br />Once we enter the Paraphrase.<br /><br /><img src="images/202-5.png" alt="images/202-5.png" /><br /><br />The decrypted file is extracted to the current directory. See the highlighted.<br />We can then process the file further.<br /><br /><br /><br /><strong><span style="text-decoration:underline;">GPG Keys Basics</span></strong><br /><br /><strong>gpg --list-keys<br />gpg --list-secret-keys</strong><br /><br />The above shows all the keys that are currently imported by us.<br />Note: During First run <strong>trustdb</strong> will be created<br /><br /><img src="images/202-6.png" alt="images/202-6.png" />1<br /><br />Therefore to <strong>delete all keys</strong> and <strong>reset</strong> everything: <strong>rm -rf /root/.gnupg</strong><br /><br /><strong>To add keys from key_file</strong><br /><br /><strong>gpg --import key_file</strong><br /><img src="images/202-7.png" alt="images/202-7.png" /><br /><br /><strong>Notice</strong> that once importing is done. We can use <strong>--list-keys</strong> and <strong>--list-secret-keys</strong> to show the details. (<strong>pub</strong> and <strong>sec</strong> keys)<br />Also we get the key_name : <strong>49829BBEB100BB2692F33CD2C9AE71AB3180BC08</strong><br />(Key_name same for both public and secret)<br /><br /><strong>To delete individual keys</strong><br /><br /><strong>gpg --delete-keys key_name</strong>											[Only <strong>pub</strong> key delete]<br /><strong>gpg --delete-secret-keys key_name</strong>							[Only <strong>sec</strong> key delete]<br /><strong>gpg --delete-secret-and-public-key key_name</strong>			[Both <strong>pub</strong> &amp; <strong>sec</strong> key delete]<br /><br /><img src="images/202-8.png" alt="images/202-8.png" /><br /><br />The process will ask for confirmation twice in a new window.<br /><img src="images/202-9.png" alt="images/202-9.png" /><br /><br /><img src="images/202-10.png" alt="images/202-10.png" /><br /><br /><br /><strong><span style="text-decoration:underline;">Decrypt an ecrypted file with a key</span></strong><br /><br /><strong>Example</strong><br />KEY File: <strong>/home/cybex/lab/thm/CTFs/overpass-3/priv.key</strong><br />GPG File: <strong>/home/cybex/lab/thm/CTFs/overpass-3/CustomerDetails.xlsx.gpg</strong><br /><br /><strong>gpg --import priv.key</strong><br /><strong>gpg CustomerDetails.xlsx.gpg</strong><br /><br /><img src="images/202-11.png" alt="images/202-11.png" /><br /><br />We can see <strong>CustomerDetails.xlsx</strong> is <strong>extracted</strong> in the same folder. (As <strong>--decrypt</strong> option wasn&#39;t used)</div>
</body>
</html>
