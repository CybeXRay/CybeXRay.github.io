<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>mongo db</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>mongo db</h1><br/>ps aux | grep mongo<br /><br /><img src="images/40-1.png" alt="images/40-1.png" /><br /><br />MongoDB is a source-available cross-platform document-oriented database program.<br />Classified as a NoSQL database program, MongoDB uses JSON-like documents with optional<br />schemas.<br /><br />Let&#39;s interact with the MongoDB service by making use of the mongo command line utility and attempting to<br />extract the administrator password. A quick Google search using the keywords UniFi Default Database<br />shows that the default database name for the UniFi application is ace .<br /><br />mongo --port 27117 ace --eval &quot;db.admin.find().forEach(printjson);&quot;<br /><br /><img src="images/40-2.png" alt="images/40-2.png" /><br /><br /><br /><br /><br />The output reveals a user called Administrator. Their password hash is located in the x_shadow variable but<br />in this instance it cannot be cracked with any password cracking utilities. Instead we can change the<br />x_shadow password hash with our very own created hash in order to replace the administrators password<br />and authenticate to the administrative panel. To do this we can use the mkpasswd command line utility.<br /><br /><br /><strong>mkpasswd -m sha-512 Password1234</strong><br /><br /><strong>$6$sbnjIZBtmRds.L/E$fEKZhosqeHykiVWT1IBGju43WdVdDauv5RsvIPifi32CC2TTNU8kHOd2ToaW8fIX7XXM8P5Z8j4NB1gJGTONl1</strong><br /><br />The $6$ is the identifier for the hashing algorithm that is being used, which is SHA-512 in this case, therefore we will have to make a hash of the same type.<br /><br />SHA-512, or Secure Hash Algorithm 512, is a hashing algorithm used to convert text of<br />any length into a fixed-size string. Each output produces a SHA-512 length of 512 bits<br />(64 bytes). This algorithm is commonly used for email addresses hashing, password<br />hashing...<br /><br />Once we&#39;ve generated the SHA-512 hash the output will look similar to the one above, however due to the<br />salt the hash will change every time it is generated.<br />A salt is added to the hashing process to force their uniqueness, increase their<br />complexity without increasing user requirements, and to mitigate password attacks like<br />hash tables.<br />Let&#39;s proceed to replacing the existing hash with the one we created.<br /><br /><strong>mongo --port 27117 ace --eval &#39;db.admin.update({&quot;_id&quot;:ObjectId(&quot;61ce278f46e0fb0012d47ee4&quot;)},{$set:{&quot;x_shadow&quot;:&quot;SHA_512 Hash Generated&quot;}})&#39;</strong><br /><br /><img src="images/40-3.png" alt="images/40-3.png" /><br /><br /><br />To verify:<br />mongo --port 27117 ace --eval &quot;db.admin.find().forEach(printjson);&quot;<br /><br />Now we can login using our set password. (Password1234)<br /><br /><img src="images/40-4.png" alt="images/40-4.png" /><br /><br />Inside we find ssh credentials for root.<br /><br /><img src="images/40-5.png" alt="images/40-5.png" /></div>
</body>
</html>
